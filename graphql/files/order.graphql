# graphql/files/order.graphql

query GetOrders($first: Int, $after: ID) {
  getOrders(first: $first, after: $after) {
    pageInfo {
      endCursor
      hasNextPage
    }
    edges {
      cursor
      node {
        id
        orderNumber
        orderDate
        createdAt
        updatedAt
        status
        paid
        paymentToken
        total
        serviceFee
        deliveryFee
        discount
        note
        deliveryAddress
        tableId
        userEmail
        userName
        userPhone
      }
    }
  }
}

query GetOrder($getOrderId: String!) {
  getOrder(id: $getOrderId) {
    id
    userName
    userEmail
    userPhone
    orderNumber
    orderDate
    status
    cart
    total
    paid
    paymentToken
    discount
    serviceFee
    deliveryAddress
    deliveryTime
    note
    tableId
    createdAt
    updatedAt
  }
}

mutation DeleteOrder($deleteOrderId: String!) {
  deleteOrder(id: $deleteOrderId) {
    id
  }
}

mutation EditOrder($editOrderId: String!, $status: OrderStatus!, $deliveryTime: DateTime) {
  editOrder(id: $editOrderId, status: $status, deliveryTime: $deliveryTime) {
    id
  }
}

mutation AddOrder(
  $cart: JSON!,
  $deliveryAddress: String!,
  $deliveryFee: Float!,
  $discount: Float,
  $note: String,
  $orderNumber: String!,
  $paymentToken: String,
  $serviceFee: Float!,
  $total: Float!,
  $userEmail: String!,
  $userName: String!,
  $userPhone: String!
) {
  addOrder(
    cart: $cart,
    deliveryAddress: $deliveryAddress,
    deliveryFee: $deliveryFee,
    discount: $discount,
    note: $note,
    orderNumber: $orderNumber,
    paymentToken: $paymentToken,
    serviceFee: $serviceFee,
    total: $total,
    userEmail: $userEmail,
    userName: $userName,
    userPhone: $userPhone
  ) {
    id
    createdAt
    userName
    userEmail
    userPhone
    orderNumber
    orderDate
    status
    cart
    total
    paid
    deliveryAddress
    deliveryFee
    deliveryTime
    note
    discount
    serviceFee
    paymentToken
    tableId
  }
}

mutation EditOrderOnPayment($editOrderOnPaymentId: String!, $paymentToken: String) {
  editOrderOnPayment(id: $editOrderOnPaymentId, paymentToken: $paymentToken) {
    id
  }
}
